# How to test the tracking algorithm

## Test ros nodes

The rosnode can be tested with
    roslaunch tracking vizualize_tracking_node.launch 

This launches: 
    test_node - which plublishes pose arrays from one or multiple sources.
    visualizer_node - which lets you visualize a path from a single source, or odometry from multiple sources in rviz.
    A frame os_lidar which should only be launched if this package is tested in isolation. 

    single_cvobject_tracking_node - runs tracking algorithm tracking only one target.
    mul_cvobjects_tracking_node - runs tracking algorithm tracking multiple targets. 


Obs: this is not a good test of the tracker. Its just to see that the program work as intented when integrated with ros. Traget algorithm must be tested with pytests described below. 

## Test pdaf

The pdaf can be tested by running the tests in test_pdaf.py.
The tests are independent from ROS and from the track manager. 

Step 1: Go to test_pdaf_test_setup.py and modify the absolute path to tracking/config/config_tracking_sys.yaml. 

Step 2: Run pytest
    In terminal type: 
    cd test
    pytest test_pdaf.py (to run all tests)
    pytest test_pdaf.py::test_pdaf_constant_vel (to run a spesific test)
    pytest test_pdaf.py::test_pdaf_constant_vel -s (to print to terminal)
    Pytest can also be configured in vs code to get a nice API.

## Test track manager

When you are sure the pdaf works as intended you can test the track manager by running the tests in test_track_manager_single_target.py.
The tests are independent on ROS.
The tests are dependent on test data generated by an isolated program not included in the cv repo.

Step 1: Go to test_pdaf_test_setup.py and modify the absolute path to tracking/config/config_tracking_sys.yaml. 
Step 2: Clone this [repo] (https://github.com/chrstrom/monkey_tracking)
Step 3: Go to test_track_manager.py and modify modify the absolute path to tracking/config/config_tracking_sys.yaml, and to monkey tracking. 
Step 4: Go to monkey_tracking/config/scenario.yaml and modify "n_starting_targets" to 1.
Step 5: Run pytest

## Test track manager for multiple targets

When you are sure the pdaf works as intended you can test the track manager by running the tests in test_track_manager_mul_targets.py.
The tests are independent on ROS.
The tests are dependent on test data generated by an isolated program not included in the cv repo.

Step 1: Go to test_pdaf_test_setup.py and modify the absolute path to tracking/config/config_tracking_sys.yaml. 
Step 2: Clone this [repo] (https://github.com/chrstrom/monkey_tracking)
Step 3: Go to test_track_manager_mulTargets.py and modify modify the absolute path to tracking/config/config_tracking_sys.yaml, and to monkey tracking. 
Step 4: Go to monkey_tracking/config/scenario.yaml and modify "n_starting_targets" to the numbers of targets you want to test with. 
Step 5: Run pytest

